@using OsosOracle.MvcUI.Resources;
@{
    ViewBag.Title = Dil.Index;
}

<div class="form-group row">
    <div id="mychart"></div>
    @*<div class="col-md-6">

        </div>
        <div class="col-md-6"></div>*@
</div>



<script type="text/javascript">


    google.charts.load('current', { packages: ['corechart', 'bar'] });
    google.charts.setOnLoadCallback(HaberlesenCihazSayisiGetir);
    function GrafikCiz(jqXHR) {


        var data = new google.visualization.DataTable();
        data.addColumn('string', 'X');
        data.addColumn('number','@Dil.Adet');
        $.each(jqXHR, function (key, value) {
            data.addRow([value.TARIH, value.ADET]);
        });

        var options = {
            hAxis: {
                title: '@Dil.Zaman'
            },
            vAxis: {
                title: '@Dil.HaberlesenCihazSayisiGrafigi'
            },
            backgroundColor: '#f1f8e9'
        };

        var chart = new google.visualization.LineChart(document.getElementById('mychart'));
        chart.draw(data, options);
    }

    function HaberlesenCihazSayisiGetir() {
                try {


                    var request = $.ajax({
                                           url: "@Url.Action("HaberlesenCihazSayisiGetir", "Home")",
                                           method: "POST",
                                           async: true,
                                           dataType: "json",
                                           data: {  }
                                         });
                                          request.done(function (jqXHR) {
                                              //HaberlesenCihazSayisi  geldi
                                              GrafikCiz(jqXHR);

                                          });
                                         request.fail(function (jqXHR, textStatus) {
                                             unblockUI();
                                             var msg = jQuery.parseJSON(jqXHR.responseText);
                                             ajaxMesajGoster(msg.Mesaj);
                                         });


                } catch (e) {

                }

    }
</script>